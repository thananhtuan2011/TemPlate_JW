<p-toast></p-toast>
<div
    *ngIf="f"
    id="add-ledger"
    class="mt-6 md:mt-0 flex flex-column-reverse md:flex-column h-full"
>
    <div class="flex flex-wrap py-1 gap-2">
        <ng-container
            *appHasAccess="{
                menu: appConstant.MENU_TYPE.PHATSINH,
                action: appConstant.PERMISSION_FUNC.EDIT
            }"
        >
            <button
                *ngIf="isNewForm"
                type="button"
                pButton
                label="F8. Lưu"
                [disabled]="!validateForm()"
                (click)="onF8()"
                class="p-button-sm p-button-primary"
                icon="pi pi-save"
            ></button>
            <button
                *ngIf="fc['id']?.value > 0"
                type="button"
                pButton
                label="F8. Lưu (thay đổi)"
                [disabled]="!validateForm()"
                (click)="onF8()"
                class="p-button-sm p-button-primary"
                icon="pi pi-save"
            ></button>
            <button
                [disabled]="!validateForm()"
                type="button"
                pButton
                label="F9. Hủy"
                (click)="onF9()"
                class="p-button-sm p-button-secondary"
                icon="pi pi-trash"
            ></button>
        </ng-container>
        <ng-container
            *appHasAccess="{
                menu: appConstant.MENU_TYPE.PHATSINH,
                action: appConstant.PERMISSION_FUNC.ADD
            }"
        >
            <button
                type="button"
                pButton
                label="{{
                    isNewForm ? 'F2. Thêm định khoản' : 'F2. Sửa định khoản'
                }}"
                class="p-button-sm p-button-success"
                [disabled]="!validateForm()"
                (click)="onF2()"
                icon="pi pi-check-square"
            ></button>
            <button
                pButton
                [disabled]="!validateForm()"
                (click)="onF4()"
                type="button"
                label="{{ isNewForm ? 'F4. Thêm hóa đơn' : 'F4. Sửa hóa đơn' }}"
                class="p-button-sm p-button-warning"
                icon="pi pi-chart-line"
            ></button>
        </ng-container>
        <ng-container
            *appHasAccess="{
                menu: appConstant.MENU_TYPE.PHATSINH,
                action: appConstant.PERMISSION_FUNC.EDIT
            }"
        >
            <button
                *ngIf="isInvoiceCodeHasValue"
                type="button"
                pButton
                label="{{
                    isNewForm
                        ? 'F10. Định khoản thuế'
                        : 'F10. Sửa định khoản thuế'
                }}"
                class="p-button-sm p-button-help"
                [disabled]="!validateForm()"
                (click)="onF10()"
                icon="pi pi-dollar"
            ></button>
            <button
                #f7BtnTmp
                [disabled]="dataTable?.showAllDocument"
                type="button"
                pButton
                icon="pi pi-bars"
                label="F7. Các lệnh khác"
                class="p-button-sm p-button-info"
                (click)="tieredMenuTmp.toggle($event)"
            ></button>
            <p-tieredMenu
                id="tieredMenuTmp"
                class="menu"
                name="menu"
                #tieredMenuTmp
                [model]="buttonMenus"
                [popup]="true"
            ></p-tieredMenu>
            <a [href]="endPointInvoice"
                ><button
                    type="button"
                    pButton
                    label="Hóa đơn điện tử"
                    class="p-button-sm p-button-info"
                ></button
            ></a>
        </ng-container>
    </div>

    <form
        *appHasAccess="{
            menu: appConstant.MENU_TYPE.PHATSINH,
            action: appConstant.PERMISSION_FUNC.EDIT
        }"
        [formGroup]="ledgerForm"
        class="text-sm py-2"
        pFocusTrap
        pFocusTrapDisabled="true"
    >
        <div *ngIf="!allowWorkForm" class="disable-form"></div>
        <div class="grid">
            <ng-container *ngTemplateOutlet="codeAndDateTmp"></ng-container>
            <ng-container *ngTemplateOutlet="phieuNhapTmp"></ng-container>
            <ng-container *ngTemplateOutlet="khachHangTmp"></ng-container>
            <ng-container *ngTemplateOutlet="dienGiaiTmp"></ng-container>
        </div>
        <p-divider styleClass="bg-orange-300"></p-divider>
        <div class="grid">
            <ng-container *ngTemplateOutlet="hoaDonTmp"></ng-container>
            <ng-container *ngTemplateOutlet="thueTmp"></ng-container>
        </div>
        <p-divider styleClass="bg-orange-300"></p-divider>
        <div class="grid mt-1">
            <div class="col-12 md:col-8 grid mr-0 pr-0 md:pr-2">
                <ng-container *ngTemplateOutlet="taiKhoanNoTmp"></ng-container>
                <ng-container *ngTemplateOutlet="taiKhoanCoTmp"></ng-container>
                <ng-container *ngTemplateOutlet="wareHouseTmp"></ng-container>
                <ng-container
                    *ngTemplateOutlet="arisingForOriginVoucherNumberTmp"
                ></ng-container>
            </div>
            <div class="col-12 md:col-4 flex flex-column p-0 pr-2 -mt-1">
                <ng-container *ngTemplateOutlet="tinhToanTmp"></ng-container>
            </div>
        </div>
    </form>
</div>

<ng-template #codeAndDateTmp>
    <div class="col-12 md:col-4 flex flex-column md:flex-row">
        <!--orginalVoucherNumber-->
        <div class="field flex font-bold">
            <label class="font-bold w-120" [translate]="'label.code'"></label>
            <input
                #orginalVoucherNumberTmp
                type="text"
                class="p-inputtext-sm w-full md:ml-1"
                pInputText
                [formControl]="fc['orginalVoucherNumber']"
                (blur)="getArisingForOriginVoucherNumber()"
            />
        </div>
        <!--orginalBookDate-->
        <div class="field flex font-bold mt-1 md:mt-0 md:pl-0">
            <label
                class="font-bold w-120 md:pl-1"
                [translate]="'label.date_added'"
            ></label>
            <p-inputMask
                #orginalBookDateTmp
                mask="99/99/9999"
                [showClear]="true"
                [formControl]="fc['orginalBookDate']"
                (onBlur)="onChangeOrginalBookDate()"
                class="p-inputtext-sm w-full"
            >
            </p-inputMask>
        </div>
    </div>
</ng-template>

<ng-template #phieuNhapTmp>
    <div class="col-12 md:col-8 md:pl-0">
        <div *ngIf="isShowPhieuNhap" class="flex">
            <div class="field">
                <label
                    class="font-bold w-80"
                    [translate]="'label.enter_coupon'"
                ></label>
            </div>
            <!--referenceVoucherNumber-->
            <input
                #referenceVoucherNumberTmp
                type="text"
                class="p-inputtext-sm w-10rem md:ml-3"
                pInputText
                [formControl]="fc['referenceVoucherNumber']"
            />
            <!--referenceBookDate-->
            <p-inputMask
                #referenceBookDateTmp
                mask="99/99/9999"
                [showClear]="true"
                [formControl]="fc['referenceBookDate']"
                class="p-inputtext-sm ml-2"
            ></p-inputMask>
            <!--referenceFullName-->
            <input
                #referenceFullNameTmp
                type="text"
                class="p-inputtext-sm w-12rem md:ml-2"
                pInputText
                [formControl]="fc['referenceFullName']"
            />
            <!--referenceAddress-->
            <input
                #referenceAddressTmp
                type="text"
                class="p-inputtext-sm w-full md:ml-2"
                pInputText
                [formControl]="fc['referenceAddress']"
            />
        </div>
    </div>
</ng-template>

<ng-template #khachHangTmp>
    <div class="col-12 md:col-4 flex flex-column">
        <!--orginalCompanyName-->
        <div class="field flex font-bold">
            <label class="font-bold w-100">{{ orginalCompanyNameLabel }}</label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #orginalCompanyNameTmp
                    [ngModel]="fc['orginalCompanyName'].value"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteOrginalCompanyName
                    }"
                    [suggestions]="orginalCompanyNameFilter"
                    [showEmptyMessage]="true"
                    [completeOnFocus]="true"
                    [showClear]="true"
                    (completeMethod)="filterOrginalCompanyName($event)"
                    (input)="
                        fc['orginalCompanyName'].setValue($event?.target?.value)
                    "
                    (onFocus)="orginalCompanyNameTmp.handleDropdownClick()"
                    (onClear)="onClearOrginalCompanyName()"
                    (onSelect)="onSelectOrginalCompanyName($event)"
                    field="name"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-item pTemplate="item">
                        <div
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="item.name?.length > 54">{{
                                    item.name
                                }}</marquee>
                                <p class="mb-0" *ngIf="item.name?.length <= 54">
                                    {{ item.name }}
                                </p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="item.address?.length > 54">{{
                                    item.address
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="item.address?.length <= 54"
                                >
                                    {{ item.address }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <span
                    class="p-inputgroup-addon"
                    [class.bg-blue-500]="isSavePayerName"
                >
                    <i
                        class="pi pi-save"
                        [class.text-white]="isSavePayerName"
                        [class.cursor-pointer]="isSavePayerName"
                        (click)="onSavePayerName.emit(null)"
                    ></i>
                </span>
            </div>
        </div>
        <!--orginalAddress-->
        <div class="field flex font-bold md:pt-1">
            <label
                class="font-bold w-100"
                [translate]="'label.address'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['orginalAddress'].setValue('')"
                    Class="pi pi-times cursor-pointer"
                ></i>
                <input
                    type="text"
                    class="p-inputtext-sm w-full capitalize"
                    pInputText
                    [showClear]="true"
                    (input)="onChangeOrginalAddress()"
                    [formControl]="fc['orginalAddress']"
                />
            </span>
        </div>
    </div>
</ng-template>

<ng-template #dienGiaiTmp>
    <div class="col-12 md:col-8 pl-0">
        <!--orginalDescription-->
        <div class="field flex align-items-center font-bold pl-0">
            <label
                class="font-bold w-100 pl-1 md:pl-0"
                [translate]="'label.explain'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #orginalDescriptionTmp
                    [ngModel]="fc['orginalDescription'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteOrginalDescription
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="orginalDescriptionFilter"
                    [showEmptyMessage]="true"
                    [completeOnFocus]="true"
                    [showClear]="true"
                    (onClear)="onClearOrginalDescription()"
                    (input)="
                        fc['orginalDescription'].setValue($event?.target?.value)
                    "
                    (onSelect)="onSelectOrginalDescription($event)"
                    (completeMethod)="filterOrginalDescription($event)"
                    (onFocus)="orginalDescriptionTmp.handleDropdownClick()"
                    field="name"
                    class="p-inputtext-sm ml-2"
                >
                </p-autoComplete>
                <span
                    class="p-inputgroup-addon"
                    [class.bg-blue-500]="isSaveDescription"
                >
                    <i
                        class="pi pi-save"
                        [class.text-white]="isSaveDescription"
                        [class.cursor-pointer]="isSaveDescription"
                        (click)="onSaveDescription.emit(null)"
                    ></i>
                </span>
            </div>
        </div>
        <!--attachVoucher-->
        <div class="field flex align-items-center font-bold pt-1 pl-0">
            <label
                class="font-bold w-100 pl-1 md:pl-0"
                [translate]="'label.attach_voucher'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['attachVoucher'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #attachVoucherTmp
                    type="text"
                    class="p-inputtext-sm w-full ml-2"
                    pInputText
                    [formControl]="fc['attachVoucher']"
                />
            </span>
        </div>
    </div>
</ng-template>

<ng-template #hoaDonTmp>
    <div class="col-12 md:col-2">
        <!--invoiceCode-->
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold"
                style="min-width: 80px"
                [translate]="'label.invoice_code'"
            ></label>
            <p-autoComplete
                #invoiceCodeTmp
                [ngModel]="fc['invoiceCode'].value"
                [suggestions]="invoiceCodeFilter"
                [ngClass]="{
                    'autocomplete-panel-hidden': isHiddenAutoCompleteInvoiceCode
                }"
                [emptyMessage]="emptyMessageAutoComplete"
                [showEmptyMessage]="true"
                [completeOnFocus]="true"
                [showClear]="true"
                (input)="fc['invoiceCode'].setValue($event?.target?.value)"
                (keydown.Tab)="onChangeInputAutoCompleteInvoiceCode(true)"
                (onBlur)="onBlurInputAutoCompleteInvoiceCode(false)"
                (onClear)="onClearInvoiceCode()"
                (onSelect)="onSelectInvoiceCode($event)"
                (completeMethod)="filterInvoiceCode($event)"
                (onFocus)="invoiceCodeTmp.handleDropdownClick()"
                field="code"
                class="p-inputtext-sm ml-1 uppercase"
            >
                <ng-template let-invoice pTemplate="item">
                    <span>{{ invoice.code }} | {{ invoice.name }} | {{ invoice.percent }}%</span>
                </ng-template>
            </p-autoComplete>
            <p-dropdown
                #invoiceAdditionalDeclarationCodeTmp
                id="internalType"
                [disabled]="!isInvoiceCodeHasValue"
                [options]="types.billType"
                [optionLabel]="'label'"
                [optionValue]="'value'"
                [formControl]="fc['invoiceAdditionalDeclarationCode']"
                class="ml-2"
            >
            </p-dropdown>
        </div>
        <!--invoiceSerial-->
        <div class="field flex align-items-center font-bold pt-1 md:pt-0">
            <label
                class="font-bold"
                style="min-width: 80px"
                [translate]="'label.invoice_serial'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['invoiceSerial'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #invoiceSerialTmp
                    type="text"
                    class="p-inputtext-sm w-full ml-1 uppercase"
                    pInputText
                    [formControl]="fc['invoiceSerial']"
                    [readonly]="!isInvoiceCodeHasValue"
                />
            </span>
        </div>
    </div>
    <div class="col-12 md:col-2">
        <!--invoiceNumber-->
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.invoice_number'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['invoiceNumber'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #invoiceNumberTmp
                    type="text"
                    class="p-inputtext-sm w-full mr-2"
                    pInputText
                    [formControl]="fc['invoiceNumber']"
                    [readonly]="!isInvoiceCodeHasValue"
                />
            </span>
        </div>
        <!--invoiceDate-->
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.invoice_date'"
            ></label>
            <p-inputMask
                #invoiceDateTmp
                mask="99/99/9999"
                class="p-inputtext-sm w-full ml-1"
                [formControl]="fc['invoiceDate']"
                [readonly]="!isInvoiceCodeHasValue"
            >
            </p-inputMask>
        </div>
    </div>
</ng-template>

<ng-template #thueTmp>
    <div class="col-12 md:col-4 pl-0">
        <!--invoiceTaxCode-->
        <div class="field flex align-items-center font-bold pl-0">
            <label
                class="font-bold w-120 pl-1 md:pl-0"
                [translate]="'label.tax_code'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #invoiceTaxCodeTmp
                    [ngModel]="fc['invoiceTaxCode'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteInvoiceTaxCode
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="invoiceTaxCodeFilter"
                    [showEmptyMessage]="true"
                    [delay]="500"
                    [disabled]="!isInvoiceCodeHasValue"
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterInvoiceTaxCode($event)"
                    (onFocus)="invoiceTaxCodeTmp.handleDropdownClick()"
                    (input)="
                        fc['invoiceTaxCode'].setValue($event?.target?.value)
                    "
                    (onKeyUp)="
                        onKeyUpAutoCompleteLazyLoadding({
                            event: $event,
                            key: configAriseEnum.invoiceTaxCode
                        })
                    "
                    (onClear)="onClearInvoiceTaxCode()"
                    (onSelect)="onSelectInvoiceTaxCode($event)"
                    field="taxCode"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-item pTemplate="item">
                        <div
                            *ngIf="item"
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div style="width: 90px" class="border-right-1">
                                <p>{{ item.taxCode }}</p>
                            </div>
                            <div class="px-3">
                                <p>{{ item.name }}</p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <!-- <div (click)="invoiceTaxCodeTmp.clear()" class="p-inputgroup-addon cursor-pointer">
                    <i class="pi pi-times"></i>
                </div> -->
                <span
                    class="p-inputgroup-addon"
                    [class.bg-blue-500]="isSaveTaxCode"
                >
                    <i
                        class="pi pi-save"
                        [class.text-white]="isSaveTaxCode"
                        [class.cursor-pointer]="isSaveTaxCode"
                        (click)="onSaveTaxCode.emit(null)"
                    ></i>
                </span>
            </div>
        </div>
        <!--invoiceName-->
        <div class="field flex align-items-center font-bold pl-0">
            <label
                class="font-bold w-120 pl-1 md:pl-0"
                [translate]="'label.invoice_name'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['invoiceName'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #invoiceNameTmp
                    type="text"
                    class="p-inputtext-sm w-full capitalize"
                    pInputText
                    (input)="onChangeInvoiceTaxCode()"
                    [formControl]="fc['invoiceName']"
                    [readonly]="!isInvoiceCodeHasValue"
                />
            </span>
        </div>
    </div>
    <div class="col-12 md:col-4">
        <!--invoiceAddress-->
        <div class="field flex align-items-center font-bold pl-0 md:-ml-1">
            <label
                class="font-bold w-150"
                [translate]="'label.address'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['invoiceAddress'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #invoiceAddressTmp
                    type="text"
                    class="p-readonly-sm w-full md:ml-1 capitalize"
                    pInputText
                    (input)="onChangeInvoiceTaxCode()"
                    [formControl]="fc['invoiceAddress']"
                    [readonly]="!isInvoiceCodeHasValue"
                />
            </span>
        </div>
        <!--invoiceProductItem-->
        <div class="field flex align-items-center font-bold md:-ml-1">
            <label
                class="font-bold w-150"
                [translate]="'label.sale_product'"
            ></label>
            <span class="w-full p-input-icon-right">
                <i
                    (click)="fc['invoiceProductItem'].setValue('')"
                    class="pi pi-times cursor-pointer"
                ></i>
                <input
                    #invoiceProductItemTmp
                    type="text"
                    class="p-inputtext-sm w-full md:ml-1 capitalize"
                    pInputText
                    (input)="onChangeInvoiceTaxCode()"
                    [formControl]="fc['invoiceProductItem']"
                    [readonly]="!isInvoiceCodeHasValue"
                />
            </span>
        </div>
    </div>
</ng-template>

<ng-template #taiKhoanNoTmp>
    <!--debit-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120 pl-1 md:pl-0"
                [translate]="'label.debit_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #debitCodeTmp
                    [ngModel]="fc['debitCode'].value"
                    [suggestions]="debitCodeFilter"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteDebitCode
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [lazy]="true"
                    [virtualScroll]="true"
                    [virtualScrollItemSize]="20"
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterDebitCode($event)"
                    (onFocus)="debitCodeTmp.handleDropdownClick()"
                    (input)="fc['debitCode'].setValue($event?.target?.value)"
                    (onClear)="onClearDebitCode()"
                    (onSelect)="onSelectDebitCode($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-debit pTemplate="item">
                        <div
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-10rem border-right-1">
                                <p>{{ debit.code }}</p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="debit.name?.length > 54">{{
                                    debit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="debit.name?.length <= 54"
                                >
                                    {{ debit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>Tính chất {{ debit.accGroup }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{ debit.closingDebit | number: "1.0-0" }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="debitCodeTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>
    <!--debitName-->
    <div class="col-12 md:col-5 pl-0">
        <div class="p-inputgroup w-12">
            <input
                type="text"
                class="p-inputtext-sm"
                pInputText
                disabled
                [ngModel]="fc['debitCode'].value?.name"
            />
            <span
                class="p-inputgroup-addon bg-blue-500"
                (click)="onDisplayCURSAccount.emit({ key: 'debitCode' })"
            >
                <i class="pi pi-plus text-white cursor-pointer"></i>
            </span>
        </div>
    </div>
    <!--closingDebit-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div
            class="field flex align-items-center justify-content-between font-bold"
        >
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitCodeClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitCodeClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>

    <!--debit1-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.debit_1_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #debitDetailCodeFirstTmp
                    [ngModel]="fc['debitDetailCodeFirst'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteDebitDetailCodeFirst
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="debitDetailCodeFirstFilter"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [delay]="500"
                    [disabled]="!isDebitCodeHas || !isDebitCodeHasDetails"
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterDebitDetailCodeFirst($event)"
                    (onFocus)="debitDetailCodeFirstTmp.handleDropdownClick()"
                    (input)="
                        fc['debitDetailCodeFirst'].setValue(
                            $event?.target?.value
                        )
                    "
                    (onKeyUp)="
                        onKeyUpAutoCompleteLazyLoadding({
                            event: $event,
                            key: configAriseEnum.debitDetailCodeFirst
                        })
                    "
                    (onClear)="onClearDebitDetailCodeFirst()"
                    (onSelect)="onSelectDebitDetailCodeFirst($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-debit pTemplate="item">
                        <div
                            *ngIf="debit"
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-10rem border-right-1">
                                <p>{{ debit.code }}</p>
                            </div>
                            <div class="w-3rem border-right-1 px-1">
                                <p>{{ debit.warehouseCode }}</p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="debit.name?.length > 54">{{
                                    debit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="debit.name?.length <= 54"
                                >
                                    {{ debit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>{{ debit.closingStockQuantity || 0 }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{
                                        debit.closingAmount || 0
                                            | number: "1.0-0"
                                    }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="debitDetailCodeFirstTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>

    <!--debit1Name-->
    <div class="col-12 md:col-5 pl-0 p-inputgroup">
        <input
            type="text"
            class="p-inputtext-sm"
            pInputText
            disabled
            [ngModel]="fc['debitDetailCodeFirst'].value?.name"
        />
        <span
            (click)="
                onDisplayCURSAccountDetailFirst.emit({
                    key: 'debitDetailCodeFirst',
                    isAllowOpen: isDebitCodeHas,
                    accountParent: fc['debitCode'].value
                })
            "
            [ngClass]="{ 'bg-blue-500': isDebitCodeHas }"
            class="p-inputgroup-addon"
        >
            <i
                class="pi pi-plus cursor-pointer"
                [ngClass]="{ 'text-white': isDebitCodeHas }"
            ></i>
        </span>
    </div>

    <!--closingDebit1-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitDetailCodeFirstClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitDetailCodeFirstClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>

    <!--debit2-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.debit_2_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #debitDetailCodeSecondTmp
                    [ngModel]="fc['debitDetailCodeSecond'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteDebitDetailCodeSecond
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="debitDetailCodeSecondFilter"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [delay]="500"
                    [disabled]="
                        !isDebitDetailCodeFirstHasDetails ||
                        !isDebitDetailCodeFirstHas
                    "
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterDebitDetailCodeSecond($event)"
                    (onKeyUp)="
                        onKeyUpAutoCompleteLazyLoadding({
                            event: $event,
                            key: configAriseEnum.debitDetailCodeSecond
                        })
                    "
                    (onFocus)="debitDetailCodeSecondTmp.handleDropdownClick()"
                    (input)="
                        fc['debitDetailCodeSecond'].setValue(
                            $event?.target?.value
                        )
                    "
                    (onClear)="onClearDebitDetailCodeSecond()"
                    (onSelect)="onSelectDebitDetailCodeSecond($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-debit pTemplate="item">
                        <div
                            *ngIf="debit"
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-12rem border-right-1">
                                <p>{{ debit.code }}</p>
                            </div>
                            <div class="w-3rem border-right-1 px-1">
                                <p>{{ debit.warehouseCode }}</p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="debit.name?.length > 54">{{
                                    debit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="debit.name?.length <= 54"
                                >
                                    {{ debit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>{{ debit.closingStockQuantity || 0 }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{
                                        debit.closingAmount || 0
                                            | number: "1.0-0"
                                    }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="debitDetailCodeSecondTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>

    <!--debit2Name-->
    <div class="col-12 md:col-5 pl-0">
        <div class="p-inputgroup w-12">
            <input
                type="text"
                class="p-inputtext-sm"
                pInputText
                disabled
                [ngModel]="fc['debitDetailCodeSecond'].value?.name"
            />
            <span
                (click)="
                    onDisplayCURSAccountDetailSecond.emit({
                        key: 'debitDetailCodeSecond',
                        isAllowOpen: isDebitCodeHas,
                        accountParent: fc['debitCode'].value,
                        accountDetail1: fc['debitDetailCodeFirst'].value
                    })
                "
                [ngClass]="{ 'bg-blue-500': isDebitDetailCodeFirstHas }"
                class="p-inputgroup-addon"
            >
                <i
                    class="pi pi-plus cursor-pointer"
                    [ngClass]="{ 'text-white': isDebitDetailCodeFirstHas }"
                ></i>
            </span>
        </div>
    </div>

    <!--closingDebit2-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitDetailCodeSecondClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="debitDetailCodeSecondClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>
</ng-template>

<ng-template #taiKhoanCoTmp>
    <!--Credit-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120 pl-1 md:pl-0"
                [translate]="'label.credit_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #creditCodeTmp
                    [ngModel]="fc['creditCode'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteCreditCode
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="creditCodeFilter"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [lazy]="true"
                    [virtualScroll]="true"
                    [virtualScrollItemSize]="20"
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterCreditCode($event)"
                    (onFocus)="creditCodeTmp.handleDropdownClick()"
                    (input)="fc['creditCode'].setValue($event?.target?.value)"
                    (onClear)="onClearCreditCode()"
                    (onSelect)="onSelectCreditCode($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-credit pTemplate="item">
                        <div
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-10rem border-right-1">
                                <marquee *ngIf="credit.code.length > 35">{{
                                    credit.code
                                }}</marquee>
                                <p *ngIf="credit.code.length <= 35">
                                    {{ credit.code }}
                                </p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="credit.name.length > 35">{{
                                    credit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="credit.name.length <= 54"
                                >
                                    {{ credit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>{{ credit.accGroup }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{ credit.closingCredit | number: "1.0-0" }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="creditCodeTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>
    <!--CreditName-->
    <div class="col-12 md:col-5 pl-0">
        <div class="p-inputgroup w-12">
            <input
                type="text"
                class="p-inputtext-sm"
                pInputText
                disabled
                [ngModel]="fc['creditCode'].value?.name"
            />
            <span
                class="p-inputgroup-addon bg-blue-500"
                (click)="onDisplayCURSAccount.emit({ key: 'creditCode' })"
            >
                <i class="pi pi-plus text-white cursor-pointer"></i>
            </span>
        </div>
    </div>
    <!--closingCredit-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div
            class="field flex align-items-center justify-content-between font-bold"
        >
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditCodeClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditCodeClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>

    <!--Credit1-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.credit_1_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #creditDetailCodeFirstTmp
                    [ngModel]="fc['creditDetailCodeFirst'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteCreditDetailCodeFirst
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="creditDetailCodeFirstFilter"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [delay]="500"
                    [disabled]="!isCreditCodeHas || !isCreditCodeHasDetails"
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterCreditDetailCodeFirst($event)"
                    (onFocus)="creditDetailCodeFirstTmp.handleDropdownClick()"
                    (onKeyUp)="
                        onKeyUpAutoCompleteLazyLoadding({
                            event: $event,
                            key: configAriseEnum.creditDetailCodeFirst
                        })
                    "
                    (input)="
                        fc['creditDetailCodeFirst'].setValue(
                            $event?.target?.value
                        )
                    "
                    (onClear)="onClearCreditDetailCodeFirst()"
                    (onSelect)="onSelectCreditDetailCodeFirst($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-credit pTemplate="item">
                        <div
                            *ngIf="credit"
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-12rem border-right-1">
                                <marquee *ngIf="credit.code.length > 35">{{
                                    credit.code
                                }}</marquee>
                                <p *ngIf="credit.code.length <= 35">
                                    {{ credit.code }}
                                </p>
                            </div>
                            <div class="w-3rem border-right-1 px-1">
                                <p>{{ credit.warehouseCode }}</p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="credit.name.length > 54">{{
                                    credit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="credit.name.length <= 54"
                                >
                                    {{ credit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>{{ credit.closingStockQuantity || 0 }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{
                                        credit.closingAmount || 0
                                            | number: "1.0-0"
                                    }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="creditDetailCodeFirstTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>
    <!--Credit1Name-->
    <div class="col-12 md:col-5 pl-0 p-inputgroup">
        <input
            type="text"
            class="p-inputtext-sm"
            pInputText
            disabled
            [ngModel]="fc['creditDetailCodeFirst'].value?.name"
        />
        <span
            (click)="
                onDisplayCURSAccountDetailFirst.emit({
                    key: 'creditDetailCodeFirst',
                    isAllowOpen: isCreditCodeHas,
                    accountParent: fc['creditCode'].value
                })
            "
            [ngClass]="{ 'bg-blue-500': isCreditCodeHas }"
            class="p-inputgroup-addon"
        >
            <i
                class="pi pi-plus cursor-pointer"
                [ngClass]="{ 'text-white': isCreditCodeHas }"
            ></i>
        </span>
    </div>
    <!--closingCredit1-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditDetailCodeFirstClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditDetailCodeFirstClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>

    <!--Credit2-->
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.credit_2_code_name'"
            ></label>
            <div class="p-inputgroup w-full">
                <p-autoComplete
                    #creditDetailCodeSecondTmp
                    [ngModel]="fc['creditDetailCodeSecond'].value"
                    [ngClass]="{
                        'autocomplete-panel-hidden':
                            isHiddenAutoCompleteCreditDetailCodeSecond
                    }"
                    [emptyMessage]="emptyMessageAutoComplete"
                    [suggestions]="creditDetailCodeSecondFilter"
                    [showEmptyMessage]="true"
                    [autoHighlight]="true"
                    [delay]="500"
                    [disabled]="
                        !isCreditDetailCodeFirstHasDetails ||
                        !isCreditDetailCodeFirstHas
                    "
                    [completeOnFocus]="true"
                    [showClear]="false"
                    [autoWidth]="false"
                    (completeMethod)="filterCreditDetailCodeSecond($event)"
                    (onFocus)="creditDetailCodeSecondTmp.handleDropdownClick()"
                    (onKeyUp)="
                        onKeyUpAutoCompleteLazyLoadding({
                            event: $event,
                            key: configAriseEnum.creditDetailCodeSecond
                        })
                    "
                    (input)="
                        fc['creditDetailCodeSecond'].setValue(
                            $event?.target?.value
                        )
                    "
                    (onClear)="onClearCreditDetailCodeSecond()"
                    (onSelect)="onSelectCreditDetailCodeSecond($event)"
                    field="code"
                    class="p-inputtext-sm capitalize"
                >
                    <ng-template let-credit pTemplate="item">
                        <div
                            *ngIf="credit"
                            class="w-auto flex flex-nowrap align-content-center"
                        >
                            <div class="w-12rem border-right-1">
                                <marquee *ngIf="credit.code.length > 35">{{
                                    credit.code
                                }}</marquee>
                                <p *ngIf="credit.code.length <= 35">
                                    {{ credit.code }}
                                </p>
                            </div>
                            <div class="w-3rem border-right-1 px-1">
                                <p>{{ credit.warehouseCode }}</p>
                            </div>
                            <div
                                class="w-26rem overflow-hidden border-right-1 px-1"
                            >
                                <marquee *ngIf="credit.name.length > 54">{{
                                    credit.name
                                }}</marquee>
                                <p
                                    class="mb-0"
                                    *ngIf="credit.name.length <= 54"
                                >
                                    {{ credit.name }}
                                </p>
                            </div>
                            <div class="w-6rem border-right-1 px-1">
                                <p>{{ credit.closingStockQuantity || 0 }}</p>
                            </div>
                            <div class="w-6rem px-1">
                                <p>
                                    {{
                                        credit.closingAmount || 0
                                            | number: "1.0-0"
                                    }}
                                </p>
                            </div>
                        </div>
                    </ng-template>
                </p-autoComplete>
                <div
                    (click)="creditDetailCodeSecondTmp.clear()"
                    class="p-inputgroup-addon cursor-pointer"
                >
                    <i class="pi pi-times"></i>
                </div>
            </div>
        </div>
    </div>

    <!--Credit2Name-->
    <div class="col-12 md:col-5 pl-0">
        <div class="p-inputgroup w-12">
            <input
                type="text"
                class="p-inputtext-sm"
                pInputText
                disabled
                [ngModel]="fc['creditDetailCodeSecond'].value?.name"
            />
            <span
                (click)="
                    onDisplayCURSAccountDetailSecond.emit({
                        key: 'creditDetailCodeSecond',
                        isAllowOpen: isCreditCodeHas,
                        accountParent: fc['creditCode'].value,
                        accountDetail1: fc['creditDetailCodeFirst'].value
                    })
                "
                [ngClass]="{ 'bg-blue-500': isCreditDetailCodeFirstHas }"
                class="p-inputgroup-addon"
            >
                <i
                    class="pi pi-plus cursor-pointer"
                    [ngClass]="{ 'text-white': isCreditDetailCodeFirstHas }"
                ></i>
            </span>
        </div>
    </div>

    <!--closingCredit2-->
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="w-120 font-bold text-color-secondary opacity-40"
                [translate]="'label.last_stock'"
            ></label>
            <div class="so-du-cuoi">
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditDetailCodeSecondClosingStockQuantity"
                />
                <input
                    type="text"
                    class="p-inputtext-sm w-full text-right"
                    pInputText
                    disabled
                    [value]="creditDetailCodeSecondClosing | number: '1.0-0'"
                />
            </div>
        </div>
    </div>
</ng-template>

<ng-template #wareHouseTmp>
    <div class="col-12 md:col-3 pl-0">
        <div class="field flex align-items-center font-bold">
            <label
                class="font-bold w-120"
                [translate]="'label.warehouse_code'"
            ></label>
            <div class="grid w-full">
                <div class="col-6 px-0 py-1">
                    <input
                        type="text"
                        class="p-inputtext-sm w-full"
                        pInputText
                        [ngModel]="debitWarehouse.code"
                        disabled
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
                <div class="col-6 px-0 py-1">
                    <input
                        type="text"
                        class="p-inputtext-sm w-full"
                        pInputText
                        [ngModel]="creditWarehouse.code"
                        disabled
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 md:col-5 pl-0">
        <div class="field flex align-items-center font-bold">
            <div class="grid w-full">
                <div class="col-6 px-0 py-2">
                    <input
                        type="text"
                        class="p-inputtext-sm w-full"
                        pInputText
                        [ngModel]="debitWarehouse.name"
                        disabled
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
                <div class="col-6 px-0 py-2">
                    <input
                        type="text"
                        class="p-inputtext-sm w-full"
                        pInputText
                        [ngModel]="creditWarehouse.name"
                        disabled
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
        </div>
    </div>
    <div class="col-12 md:col-4 pl-0 md:pr-0">
        <div class="field flex align-items-center font-bold">
            <label class="w-100 font-bold block md:hidden"></label>
            <input
                type="text"
                class="p-inputtext-sm w-full text-right"
                pInputText
                disabled
            />
        </div>
    </div>
</ng-template>

<ng-template #tinhToanTmp>
    <!--projectCode-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150 pl-1 md:pl-0"
            [translate]="'label.project_code'"
        ></label>
        <div class="p-inputgroup w-full">
            <p-autoComplete
                #projectCodeTmp
                [ngModel]="fc['projectCode'].value"
                [ngClass]="{
                    'autocomplete-panel-hidden': isHiddenAutoCompleteProjectCode
                }"
                [disabled]="!isAllowProjectCode"
                [emptyMessage]="emptyMessageAutoComplete"
                [suggestions]="projectCodeFilter"
                [showEmptyMessage]="true"
                [lazy]="true"
                [virtualScroll]="true"
                [virtualScrollItemSize]="20"
                [completeOnFocus]="true"
                [showClear]="true"
                [autoWidth]="false"
                (completeMethod)="filterProjectCode($event)"
                (onFocus)="projectCodeTmp?.handleDropdownClick()"
                (input)="fc['projectCode'].setValue($event?.target?.value)"
                (onSelect)="onSelectProjectCode($event)"
                field="code"
                class="p-inputtext-sm capitalize"
            >
                <ng-template let-project pTemplate="item">
                    <div class="w-auto flex flex-nowrap align-content-center">
                        <div style="width: 90px" class="border-right-1">
                            <p>{{ project.code }}</p>
                        </div>
                        <div class="px-3">
                            <p class="mb-0">{{ project.name }}</p>
                        </div>
                    </div>
                </ng-template>
            </p-autoComplete>
            <div
                (click)="onDisplayCrudProject.emit(true)"
                class="p-inputgroup-addon cursor-pointer bg-blue-500"
            >
                <i class="pi pi-plus text-white"></i>
            </div>
        </div>
    </div>
    <!--depreciaMonth-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150 pl-1 md:pl-0"
            [translate]="'label.depreciation_month'"
        ></label>
        <p-inputNumber
            #depreciaMonthTmp
            class="p-inputtext-sm w-full ml-1"
            [formControl]="fc['depreciaMonth']"
            [disabled]="!isAllowDepreciaMonth"
        >
        </p-inputNumber>
    </div>
    <!--orginalCurrency-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150 pl-1 md:pl-0"
            [translate]="'label.foreign_currency'"
        ></label>
        <p-inputNumber
            #orginalCurrencyTmp
            [formControl]="fc['orginalCurrency']"
            [disabled]="!isForeignCurrency"
            class="p-inputtext-sm w-full ml-1"
        >
        </p-inputNumber>
    </div>
    <!--exchangeRate-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150"
            [translate]="'label.exchange_rate'"
        ></label>
        <p-inputNumber
            #exchangeRateTmp
            [formControl]="fc['exchangeRate']"
            [disabled]="!isForeignCurrency"
            (keyup)="onChangeExchangeRate($event)"
            class="p-inputtext-sm w-full ml-1"
        >
        </p-inputNumber>
    </div>
    <!--quantity-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150"
            [translate]="'label.stock_quantity'"
        ></label>
        <p-inputNumber
            #quantityTmp
            [disabled]="!isAllowInputQuantityAndUnitPrice"
            [formControl]="fc['quantity']"
            (onBlur)="onChangeQuantity($event)"
            class="p-inputtext-sm w-full ml-1"
        >
        </p-inputNumber>
    </div>
    <!--unitPrice-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150"
            [translate]="'label.unit_price'"
        ></label>
        <p-inputNumber
            #unitPriceTmp
            [formControl]="fc['unitPrice']"
            [disabled]="!isAllowInputQuantityAndUnitPrice"
            (onBlur)="onChangeUnitPrice($event)"
            class="p-inputtext-sm w-full ml-1"
        >
        </p-inputNumber>
    </div>
    <!--amount-->
    <div class="field flex align-items-center font-bold">
        <label
            class="w-100 font-bold w-150"
            [translate]="'label.amount'"
        ></label>
        <p-inputNumber
            #amountTmp
            class="p-inputtext-sm w-full ml-1"
            [formControl]="fc['amount']"
            (onBlur)="onChangeAmount($event)"
        >
        </p-inputNumber>
    </div>
</ng-template>

<ng-template #arisingForOriginVoucherNumberTmp>
    <div
        *ngIf="
            arisingForOriginVoucherNumber &&
            arisingForOriginVoucherNumber.totalItem > 0 &&
            allowWorkForm
        "
        class="col-12 pl-0 orginal-voucher-number-summary"
    >
        <span>
            Mã
            <span class="account">{{ fc["orginalVoucherNumber"].value }}</span>
            có {{ arisingForOriginVoucherNumber.totalItem }} dòng dữ liệu.
            <ng-container
                *ngFor="
                    let item of arisingForOriginVoucherNumber.ledgers;
                    let index = index
                "
            >
                <span class="account">{{ item.acountCode }}: </span>
                <span> {{ item.totalAmount | doubleInString }}đ</span>
                <span
                    class="minus"
                    *ngIf="
                        index < arisingForOriginVoucherNumber.ledgers.length - 1
                    "
                >
                    -
                </span>
            </ng-container>
            - Thành tiền:
            <span class="account"
                >{{
                    arisingForOriginVoucherNumber.totalAmount +
                        fc["amount"].value | doubleInString
                }}đ</span
            >
        </span>
    </div>
</ng-template>
