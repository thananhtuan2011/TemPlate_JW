<div *ngIf="display" class="card card-table">
    <h5
        [translate]="
            isEdit ? 'label.incoming_text_edit' : 'label.incoming_text_add'
        "
    ></h5>
    <form [formGroup]="textGoForm">
        <div class="p-fluid formgrid grid">
            <div class="field col">
                <label for="name"
                    >{{ "label.text_go_type" | translate
                    }}<span class="text-pink-400">*</span></label
                >
                <p-dropdown
                    id="name"
                    [options]="documentTypes"
                    [formControlName]="'documentId'"
                    optionLabel="name"
                    optionValue="id"
                    placeholder="Chọn loại văn bản"
                    [filter]="true"
                    (onFilter)="onFilterDocumentType($event)"
                ></p-dropdown>
            </div>
            <div class="field col">
                <label for="textNo">{{ "label.text_go_no" | translate }}</label>
                <input
                    pInputText
                    id="textNo"
                    type="text"
                    class="w-full"
                    placeholder="Nhập số hiệu văn bản"
                    [formControlName]="'textSymbol'"
                />
            </div>
        </div>
        <div class="p-fluid formgrid grid">
            <div class="field col">
                <label for="deptReceived">{{
                    "label.text_go_receive_dept" | translate
                }}</label>
                <p-dropdown
                    id="deptReceived"
                    [options]="departments"
                    [formControlName]="'departmentId'"
                    placeholder="Chọn phòng ban nhận"
                    [filter]="true"
                    optionLabel="name"
                    optionValue="id"
                    (onFilter)="onFilterDepartment($event)"
                ></p-dropdown>
            </div>
            <div class="field col">
                <label for="textDate">{{
                    "label.text_go_date" | translate
                }}</label>
                <p-calendar
                    id="textDate"
                    inputId="textDate"
                    class="w-full"
                    [formControlName]="'dateText'"
                    dateFormat="dd/mm/yy"
                ></p-calendar>
            </div>
        </div>
        <div class="p-fluid formgrid grid">
            <div class="field col">
                <label for="drafter">{{
                    "label.text_go_editor" | translate
                }}</label>
                <p-dropdown
                    id="drafter"
                    [options]="users"
                    placeholder="Chọn người soạn thảo"
                    [formControlName]="'draftarId'"
                    [filter]="true"
                    optionLabel="fullName"
                    optionValue="id"
                    (onFilter)="onFilterUser($event)"
                ></p-dropdown>
            </div>
            <div class="field col">
                <label for="quote">{{
                    "label.text_go_quote" | translate
                }}</label>
                <input
                    pInputText
                    id="quote"
                    type="text"
                    class="w-full"
                    placeholder="Nhập nội dung"
                    [formControlName]="'content'"
                />
            </div>
        </div>
        <div class="formgrid grid">
            <div class="field col">
                <label for="signer">{{
                    "label.text_go_signer" | translate
                }}</label>
                <p-dropdown
                    id="signer"
                    [options]="users"
                    placeholder="Chọn người ký"
                    [formControlName]="'signerTextId'"
                    [filter]="true"
                    optionLabel="fullName"
                    optionValue="id"
                    (onFilter)="onFilterUser($event)"
                ></p-dropdown>
            </div>
            <div class="field col">
                <label for="address">{{
                    "label.text_go_address_received" | translate
                }}</label>
                <input
                    pInputText
                    id="recipient"
                    [formControlName]="'recipient'"
                    type="text"
                    class="w-full"
                    placeholder="Nhập nơi nhận"
                />
            </div>
        </div>
        <div class="formgrid grid">
            <div class="field col">
                <label htmlFor="uploadFile">{{ "Tệp tin" | translate }}</label>
                <button
                    pButton
                    icon="pi pi-upload"
                    (click)="uploadFile.click()"
                    [label]="'button.import' | translate"
                ></button>
                <input
                    #uploadFile
                    class="hidden"
                    type="file"
                    (change)="doAttachFile($event)"
                    multiple
                />
                <small
                    *ngIf="selectedFile"
                    (click)="selectedFile = null; uploadFile.value = null"
                    class="p-error"
                    style="cursor: pointer; margin-top: 10px"
                    >{{ selectedFile.name }}
                </small>
                <small
                    *ngIf="selectedFile == undefined || selectedFile == null"
                    class="p-error"
                    style="cursor: pointer; margin-top: 10px"
                    >{{ fileName }}
                </small>
            </div>
        </div>
        <div class="w-full col-12 flex align-items-center justify-content-end">
            <button
                icon="pi pi-times"
                pButton
                class="w-auto p-button-outlined mr-2"
                (click)="onBack()"
                [label]="'button.backF6' | translate"
            ></button>
            <button
                icon="pi pi-check"
                class="w-auto"
                pButton
                (click)="onSave()"
                [label]="'button.saveF8' | translate"
            ></button>
        </div>
    </form>
</div>
